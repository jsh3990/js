<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h3>헬로월드</h3>

    <button type="button" id="getBtn">REST API로 get요청</button>
    <button type="button" id="postBtn">REST API로 post요청</button>

    <button type="button" id="getBtn2">실습 get요청</button>
    <button type="button" id="postBtn2">실습 post요청</button>
    

    <script>
        let getBtn = document.getElementById("getBtn");
        getBtn.onclick = function() {
            let name = "홍길동";
            let age = 20;
            //get요청
            fetch("http://localhost:8181/chap06/getData3/" + name + "/" + age )
            .then(function(response) {
                //response.json()
                return response.text();
            })
            .then(function(data) {
                console.log(data);
                
            })
        }

        let postBtn = document.getElementById("postBtn");
        postBtn.onclick = function() {

            //FETCH POST방식
            fetch("http://localhost:8181/chap06/getJSON", {
                method : "POST", //요청타입
                headers: {
                    "Content-Type" : "application/json" //필수: 보내는 데이터에 대한 타입을 반드시 명시
                },
                body : JSON.stringify( {num:1, name: "홍길동", age:20} ) //보낼데이터
            })
            .then(function(response) {
                return response.text();
            })
            .then(function(data) {
                console.log(data);
                
            })
        }

        let getBtn2 = document.getElementById("getBtn2")
        getBtn2.onclick = function() {
            fetch("http://localhost:8181/chap06/api/v1/getData?num=" + 1 + "&name=" + "홍길동" )
            .then(function(response) {
                //response.json()
                return response.json();
            })
            .then(function(data) {
                console.log(data);
                
            })
        }

        let postBtn2 = document.getElementById("postBtn2");
        postBtn2.onclick = function() {

            //JS에서 폼 데이터를 보낼 때
            let form = new URLSearchParams();
            form.append("num", "1")
            form.append("first", "클라이언트에서 보낸 값")

            fetch("http://localhost:8181/chap06/api/v1/getInfo", {
                method : "POST", //요청타입
                headers: {
                    "Content-Type" : "application/x-www-form-urlencoded" //필수: 보내는 데이터에 대한 타입을 반드시 명시
                },
                body : form //보낼데이터
            })
            .then(function(response) {
                return response.json();
            })
            .then(function(data) {
                console.log(data);
                
            })
        }
    </script>

</body>
</html>